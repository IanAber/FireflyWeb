<html lang="en">
    <head>
        <title>Firefly Status</title>
        <script type="text/javascript" src="/scripts/jquery-3.6.0.min.js"></script>
        <script type="text/javascript" src="scripts/jquery-ui.js"></script>
        <link rel="stylesheet" type="text/css" href="css/jquery-ui.min.css">

        <style>
            td.label {
                width:30%;
                text-align:right;
                border-right-style:solid;
                border-right-width:2px;
                padding-right:5px;
            }
            td {
                padding-left:5px;
            }
            div {
                padding:5px;
            }
            h2 {
                text-align:center;
            }
            table {
                margin:auto;
            }
            th.RelayOn {
                background-color:green;
                color:white;
                padding:10px
            }
            th.RelayOff {
                background-color:red;
                color:white;
                padding:10px
            }
            table.Relays {
                border-color: darkslategray;
                border-width: medium;
                border-style: solid;
                background-color: lightseagreen;
            }
            table.Electrolyser {
                width:48vw;
                border-color: darkslategray;
                border-width: medium;
                border-style: solid;
                background-color: azure;
            }
            table.Dryer {
                width: 28vw;
                border-color: darkslategray;
                border-width: medium;
                border-style: solid;
                background-color: azure;
            }
            table.FuelCell {
                width: 39vw;
                border-color: darkslategray;
                border-width: medium;
                border-style: solid;
                background-color: seashell;
            }
            table.Gas {
                width: 30vw;
                border-color: darkslategray;
                border-width: medium;
                border-style: solid;
                background-color: lightseagreen;
            }
            table.Water {
                width: 25vw;
                border-color: darkslategray;
                border-width: medium;
                border-style: solid;
                background-color: cornflowerblue;
            }
            table.AC {
                width: 35vw;
                border-color: darkslategray;
                border-width: medium;
                border-style: solid;
                background-color: palegreen;
            }
        </style>
        <script type="text/javascript">
            wsTimeout = null
            function receiveStatus() {
                let url = "ws://" + window.location.host + "/wsFull";
                let conn = new WebSocket(url);

                // let  Data = document.getElementById("Data");

                conn.onclose = function() {
                    $("#connStatus").innerText = 'Connection closed';
                }
                conn.onmessage = function(evt) {
                    $("#connStatus").innerText = '';
                    try {
                        jsonData = JSON.parse(evt.data);

                        let rl = jsonData.relays
                        if (rl !== undefined) {
                            let rlel0 = $("#rlel0");
                            let rlel1 = $("#rlel1");
                            let rlgas = $("#rlgas");
                            let rlfcrun0 = $("#rlfc0run");
                            let rlfcen1 = $("#rlfc1en");
                            let rlfcrun1 = $("#rlfc1run");
                            let rlspare = $("#rlspare");
                            let rlfcen0 = $("#rlfc0en");

                            if (rl.el0) {
                                rlel0.removeClass("RelayOff");
                                rlel0.addClass("RelayOn");
                            } else {
                                rlel0.removeClass("RelayOn");
                                rlel0.addClass("RelayOff");
                            }
                            if (rl.el1) {
                                rlel1.removeClass("RelayOff");
                                rlel1.addClass("RelayOn");
                            } else {
                                rlel1.removeClass("RelayOn");
                                rlel1.addClass("RelayOff");
                            }
                            if (rl.gas) {
                                rlgas.removeClass("RelayOff");
                                rlgas.addClass("RelayOn");
                            } else {
                                rlgas.removeClass("RelayOn");
                                rlgas.addClass("RelayOff");
                            }
                            if (rl.fc0en) {
                                rlfcen0.removeClass("RelayOff");
                                rlfcen0.addClass("RelayOn");
                            } else {
                                rlfcen0.removeClass("RelayOn");
                                rlfcen0.addClass("RelayOff");
                            }
                            if (rl.fc0run) {
                                rlfcrun0.removeClass("RelayOff");
                                rlfcrun0.addClass("RelayOn");
                            } else {
                                rlfcrun0.removeClass("RelayOn");
                                rlfcrun0.addClass("RelayOff");
                            }
                            if (rl.fc1en) {
                                rlfcen1.removeClass("RelayOff");
                                rlfcen1.addClass("RelayOn");
                            } else {
                                rlfcen1.removeClass("RelayOn");
                                rlfcen1.addClass("RelayOff");
                            }
                            if (rl.fc1run) {
                                rlfcrun1.removeClass("RelayOff");
                                rlfcrun1.addClass("RelayOn");
                            } else {
                                rlfcrun1.removeClass("RelayOn");
                                rlfcrun1.addClass("RelayOff");
                            }
                            if (rl.spare) {
                                rlspare.removeClass("RelayOff");
                                rlspare.addClass("RelayOn");
                            } else {
                                rlspare.removeClass("RelayOn");
                                rlspare.addClass("RelayOff");
                            }
                        }

                        if (jsonData.el != null) {
                            let el = jsonData.el[0];

                            if (el !== undefined) {
                                $("#el0").css({display: "unset"});
                                if (el.on) {
                                    $("#el0On").css({display: "unset"});
                                    $("#el0Off").css({display: "none"});
                                    $("#dryerOn").css({display: "unset"});
                                    $("#dryerOff").css({display: "none"});
                                    $("#el0SysState").text(el.systemstate);
                                    $("#el0ElState").text(el.elstate);
                                    $("#el0Level").text(el.level);
                                    $("#el0Temp").text(el.temp.toFixed(1));
                                    $("#el0InnerPressure").text(el.innerpressure.toFixed(1));
                                    $("#el0OuterPressure").text(el.outerpressure.toFixed(1));
                                    $("#el0H2Flow").text(el.h2flow.toFixed(1));
                                    $("#el0WaterPressure").text(el.waterpressure.toFixed(1));
                                    $("#el0RestartPressure").text(el.restart);
                                    $("#el0MaxTankPressure").text(el.maxtank)
                                    $("#el0CurrentProduction").text(el.rate);
                                    $("#el0DefaultProduction").text(el.defrate);
                                    $("#el0StackVoltage").text(el.voltage.toFixed(1));
                                    $("#el0SerialNumber").text(el.serial);
                                    $("#el0IP").text(el.ip);
                                    let stop = $("#elStop0");
                                    switch (el.elstate) {
                                        case "Steady" : stop.removeClass("RelayOn");
                                            stop.addClass("RelayOff");
                                            stop.css({display:"revert"});
                                            stop.text("Stop");
                                            break;
                                        case "Idle" : stop.removeClass("RelayOff");
                                            stop.addClass("RelayOn");
                                            stop.css({display:"revert"});
                                            stop.text("Start");
                                            break;
                                        default : stop.css({display:"none"});
                                    }
                                } else {
                                    $("#el0On").css({display: "none"});
                                    $("#el0Off").css({display: "unset"});
                                    $("#dryerOn").css({display: "none"});
                                    $("#dryerOff").css({display: "unset"});
                                    $("#el0SysState").text(el.systemstate);
                                    $("")
                                }
                                $("#dryerInputPressure").text(jsonData.dr.inputPressure.toFixed(1));
                                $("#dryerOutputPressure").text(jsonData.dr.outputPressure.toFixed(1));
                                $("#dryerTemp0").text(jsonData.dr.temp0.toFixed(1));
                                $("#dryerTemp1").text(jsonData.dr.temp1.toFixed(1));
                                // if (jsonData.dr.temp2 !== null) {
                                //     $("#dryerTemp2").text(jsonData.dr.temp2.toFixed(1));
                                // }
                                // if (jsonData.dr.temp3 !== null) {
                                //     $("#dryerTemp3").text(jsonData.dr.temp3.toFixed(1));
                                // }
                                $("#dryerError").text(jsonData.dr.errors);
                                $("#dryerWarning").text(jsonData.dr.warnings);
                            } else {
                                $("#el0").css({display: "none"});
                                $("#dryer").css({display:"none"})
                            }
                            el = jsonData.el[1];
                            if (el !== undefined) {
                                $("#el1").css({display: "unset"});
                                if (el.on) {
                                    $("#el1On").css({display: "unset"});
                                    $("#el1Off").css({display: "none"});
                                    $("#el1SysState").text(el.systemstate);
                                    $("#el1ElState").text(el.elstate);
                                    $("#el1Level").text(el.level);
                                    $("#el1Temp").text(el.temp.toFixed(1));
                                    $("#el1InnerPressure").text(el.innerpressure.toFixed(1));
                                    $("#el1OuterPressure").text(el.outerpressure.toFixed(1));
                                    $("#el1H2Flow").text(el.h2flow.toFixed(1));
                                    $("#el1WaterPressure").text(el.waterpressure.toFixed(1));
                                    $("#el1RestartPressure").text(el.restart);
                                    $("#el1MaxTankPressure").text(el.maxtank)
                                    $("#el1CurrentProduction").text(el.rate);
                                    $("#el1DefaultProduction").text(el.defrate);
                                    $("#el1StackVoltage").text(el.voltage.toFixed(1));
                                    $("#el1SerialNumber").text(el.serial);
                                    $("#el1IP").text(el.ip);
                                    stop = $("#elStop1");
                                    switch (el.elstate) {
                                        case "Steady" : stop.removeClass("RelayOn");
                                            stop.addClass("RelayOff");
                                            stop.css({display:"revert"});
                                            stop.text("Stop");
                                            break;
                                        case "Idle" : stop.removeClass("RelayOff");
                                            stop.addClass("RelayOn");
                                            stop.css({display:"revert"});
                                            stop.text("Start");
                                            break;
                                        default : stop.css({display:"none"});
                                    }
                                } else {
                                    $("#el1On").css({display: "none"});
                                    $("#el1Off").css({display: "unset"});
                                    $("#el1SysState").text(el.systemstate);
                                }
                            } else {
                                $("#el1").css({display: "none"});
                            }
                        } else {
                            $("#el0").css({display: "none"});
                            $("#el1").css({display: "none"});
                            $("#dryer").css({display:"none"})
                            $("#el0Off").css({display: "none"});
                            $("#el1Off").css({display: "none"});
                        }
                        $("#gasFuelCellPressure").text(jsonData.gas.fcpressure.toFixed(0));
                        $("#gasTankPressure").text((jsonData.gas.tankpressure).toFixed(1));
                        $('#TDS').text((jsonData.tds).toFixed(1));
                        $('#ACPower').text(jsonData.ac.watts.toFixed(2));
                        $('#ACVolts').text(jsonData.ac.volts.toFixed(2));
                        $('#ACCurrent').text(jsonData.ac.amps.toFixed(2));
                        $('#ACFrequency').text(jsonData.ac.hertz.toFixed(2));
                        $('#ACPowerFactor').text(jsonData.ac.powerfactor.toFixed(2));
                        $('#ACEnergy').text(jsonData.ac.energy.toFixed(0));
                        $('#HPPower').text(jsonData.hp.watts.toFixed(2));
                        $('#HPVolts').text(jsonData.hp.volts.toFixed(2));
                        $('#HPCurrent').text(jsonData.hp.amps.toFixed(2));
                        $('#HPFrequency').text(jsonData.hp.hertz.toFixed(2));
                        $('#HPPowerFactor').text(jsonData.hp.powerfactor.toFixed(2));
                        $('#HPEnergy').text(jsonData.hp.energy.toFixed(0));

                        if (jsonData.fc === null) {
                            $("#FuelCell0").css({display: "none"})
                            $("#FuelCell1").css({display: "none"})
                        } else {
                            let fc = jsonData.fc[0];
                            if (fc !== undefined) {
                                $("#FuelCell0").css({display: "unset"})
                                $("#fc0AnodePressure").text(fc.anodePressure.toFixed(0));
                                $("#fc0InletTemperature").text(fc.inletTemp.toFixed(1));
                                $("#fc0OutletTemperature").text(fc.outletTemp.toFixed(1));
                                $("#fc0SerialNumber").text(fc.serial);
                                $("#fc0OutputCurrent").text(fc.amps.toFixed(2));
                                $("#fc0OutputVolts").text(fc.volts.toFixed(1));
                                $("#fc0OutputPower").text(fc.power.toFixed(0));
                                $("#fc0Version").text(fc.version);
                                $("#fc0State").text(fc.state);
                                $("#fc0FaultA").text(fc.faultA);
                                $("#fc0FaultB").text(fc.faultB);
                                $("#fc0FaultC").text(fc.faultC);
                                $("#fc0FaultD").text(fc.faultD);
                                if (fc.on) {
                                    $("#FuelCell0Off").css({display: "none"})
                                    $("#FuelCell0On").css({display: "unset"})
                                } else {
                                    $("#FuelCell0On").css({display: "none"})
                                    $("#FuelCell0Off").css({display: "unset"})
                                }
                            } else {
                                $("#FuelCell0").css({display: "none"});
                            }
                            fc = jsonData.fc[1];
                            if (fc !== undefined) {
                                $("#FuelCell1").css({display: "unset"})
                                $("#fc1AnodePressure").text(fc.anodePressure.toFixed(0));
                                $("#fc1InletTemperature").text(fc.inletTemp.toFixed(1));
                                $("#fc1OutletTemperature").text(fc.outletTemp.toFixed(1));
                                $("#fc1SerialNumber").text(fc.serial);
                                $("#fc1OutputCurrent").text(fc.amps.toFixed(2));
                                $("#fc1OutputVolts").text(fc.volts.toFixed(1));
                                $("#fc1OutputPower").text(fc.power.toFixed(0));
                                $("#fc1Version").text(fc.version);
                                $("#fc1State").text(fc.state);
                                $("#fc1FaultA").text(fc.faultA);
                                $("#fc1FaultB").text(fc.faultB);
                                $("#fc1FaultC").text(fc.faultC);
                                $("#fc1FaultD").text(fc.faultD);
                                if (fc.on) {
                                    $("#FuelCell1Off").css({display: "none"})
                                    $("#FuelCell1On").css({display: "unset"})
                                } else {
                                    $("#FuelCell1On").css({display: "none"})
                                    $("#FuelCell1Off").css({display: "unset"})
                                }
                            } else {
                                $("#FuelCell1").css({display: "none"});
                            }
                        }
                    }
                    catch (e) {
                        alert(e);
                    }

                }
            }

            function elClick(element, device) {
                let payload = {command:""}
                if (element.classList.contains("RelayOff")) {
                    payload.command = "on";
                } else {
                    payload.command = "off"
                }
                let xmlhttp = new XMLHttpRequest();
                xmlhttp.open("PUT", "/el/" + device, true);
                xmlhttp.responseType = "json";
                xmlhttp.onreadystatechange = function () { //Call a function when the state changes.
                    if (xmlhttp.readyState === 4 && xmlhttp.status !== 200) {
                        if (xmlhttp.response.errors !== null) {
                            xmlhttp.response.errors.forEach(function(value, index, array){ alert(value.Device + "\n" + value.Err);});
                        } else {
                            alert(xmlhttp.responseText);
                        }
                    }
                };
                xmlhttp.send(JSON.stringify(payload));
            }

            function fcenClick(element, device) {
                let payload = {state:true,device:device}
                payload.state = element.classList.contains("RelayOff")
                let xmlhttp = new XMLHttpRequest();
                xmlhttp.open("PUT", "/fc/on_off", true);
                xmlhttp.onreadystatechange = function () { //Call a function when the state changes.
                    if (xmlhttp.readyState === 4 && xmlhttp.status === 200) {
                        alert(xmlhttp.responseText);
                    }
                };
                xmlhttp.onreadystatechange = null;
                xmlhttp.send(JSON.stringify(payload));
            }

            function fcrunClick(element, device) {
                let payload = {state:true,device:device}
                payload.state = element.classList.contains("RelayOff")
                let xmlhttp = new XMLHttpRequest();
                xmlhttp.open("PUT", "/fc/run", true);
                xmlhttp.onreadystatechange = function () { //Call a function when the state changes.
                    if (xmlhttp.readyState === 4 && xmlhttp.status === 200) {
                        alert(xmlhttp.responseText);
                    }
                };
                xmlhttp.onreadystatechange = null;
                xmlhttp.send(JSON.stringify(payload));
            }

            function gasClick(element, device) {
                let payload = {state:true}
                payload.state = element.classList.contains("RelayOff")
                let xmlhttp = new XMLHttpRequest();
                xmlhttp.open("PUT", "/gas", true);
                xmlhttp.onreadystatechange = function () { //Call a function when the state changes.
                    if (xmlhttp.readyState === 4 && xmlhttp.status === 200) {
                        alert(xmlhttp.responseText);
                    }
                };
                xmlhttp.onreadystatechange = null;
                xmlhttp.send(JSON.stringify(payload));
            }

            function elStop(element, device) {
                if (confirm("Stop electrolyser " + device)) {
                    let xmlhttp = new XMLHttpRequest();
                    if (element.classList.contains("RelayOff")) {
                        xmlhttp.open("POST", "/el/" + device + "/stop", true);
                    } else {
                        xmlhttp.open("POST", "/el/" + device + "/start", true);
                    }
                    xmlhttp.onreadystatechange = function () { //Call a function when the state changes.
                        if (xmlhttp.readyState === 4 && xmlhttp.status === 200) {
                            alert(xmlhttp.responseText);
                        }
                    };
                    xmlhttp.onreadystatechange = null;
                    xmlhttp.send(JSON.stringify());
                }
                event.stopPropagation();
            }

            function elReboot(element, device) {
                if (confirm("Reboot electrolyser " + device)) {
                    let xmlhttp = new XMLHttpRequest();
                    xmlhttp.open("PUT", "/el/" + device + "/reboot", true);
                    xmlhttp.onreadystatechange = function () { //Call a function when the state changes.
                        if (xmlhttp.readyState === 4 && xmlhttp.status === 200) {
                            alert(xmlhttp.responseText);
                        }
                    };
                    xmlhttp.onreadystatechange = null;
                    xmlhttp.send(JSON.stringify());
                }
                event.stopPropagation();
            }
            function drReboot(element) {
                if (confirm("Reboot dryer?")) {
                    let xmlhttp = new XMLHttpRequest();
                    xmlhttp.open("PUT", "/dr/reboot", true);
                    xmlhttp.onreadystatechange = function () { //Call a function when the state changes.
                        if (xmlhttp.readyState === 4 && xmlhttp.status === 200) {
                            alert(xmlhttp.responseText);
                        }
                    };
                    xmlhttp.onreadystatechange = null;
                    xmlhttp.send(JSON.stringify());
                }
                event.stopPropagation();
            }

            $(document).ready(receiveStatus);
    </script>
    </head>
    <body>
        <div>
            <table class="Relays">
                <tr>
                    <th colspan=8>Relay Status</th>
                </tr>
                <tr>
                    <th id="rlel0" class="RelayOff" onclick="elClick(this, 0)">Electrolyser 0</th>
                    <th id="rlel1" class="RelayOff" onclick="elClick(this, 1)">Electrolyser 1</th>
                    <th id="rlgas" class="RelayOff" onclick="gasClick(this)">Gas to Fuel Cell</th>
                    <th id="rlfc0en" class="RelayOff" onclick="fcenClick(this, 0)">Fuel Cell 0 Enable</th>
                    <th id="rlfc0run" class="RelayOff" onclick="fcrunClick(this, 0)">Fuel Cell 0 Run 1</th>
                    <th id="rlfc1en" class="RelayOff" onclick="fcenClick(this, 1)">Fuel Cell 1 Enable</th>
                    <th id="rlfc1run" class="RelayOff" onclick="fcrunClick(this, 1)">Fuel Cell 1 Run</th>
                    <th id="rlspare" class="RelayOff" onclick="spareClick(this)">Spare</th>
                </tr>
                <tr>
                    <td colspan="8"><span id="connStatus"></span></td>
                </tr>
            </table>
        </div>
        <div id="el0Off"  onclick="window.open('el_data.html?device=0')">
            <h3 style="text-align:center">Electrolyser 0 is switched OFF</h3>
        </div>
        <div id="el0" onclick="window.open('el_data.html?device=0')">
            <div id="el0On" style="display:none">
                <table class="Electrolyser">
                    <tr>
                        <th colspan="2"><h2>Electrolyser 0</h2></th>
                        <th id="elStop0" class="RelayOff" onclick="elStop(this, 0)">Stop</th>
                        <th id="elReboot0" class="RelayOff" onclick="elReboot(this, 0)">Reboot</th>
                    </tr>
                    <tr>
                        <td class="label">System State</td>
                        <td><span id="el0SysState"></span></td>
                        <td class="label">Electrolyser State</td>
                        <td><span id="el0ElState"></span></td>
                    </tr>
                    <tr>
                        <td class="label">Electrolyte Level</td>
                        <td><span id="el0Level"></span></td>
                        <td class="label">Electrolyte Temp</td>
                        <td><span id="el0Temp"></span> &deg;C</td>
                    </tr>
                    <tr>
                        <td class="label">Inner H2 Pressure</td>
                        <td><span id="el0InnerPressure"></span> Bar</td>
                        <td class="label">Outer H2 Pressure</td>
                        <td><span id="el0OuterPressure"></span> Bar</td>
                    </tr>
                    <tr>
                        <td class="label">H2 Flow</td>
                        <td><span id="el0H2Flow"></span> NL/hr</td>
                        <td class="label">Water Pressure</td>
                        <td><span id="el0WaterPressure"></span> Bar</td>
                    </tr>
                    <tr>
                        <td class="label">Max Tank Pressure</td>
                        <td><span id="el0MaxTankPressure"></span> Bar</td>
                        <td class="label">Restart Pressure</td>
                        <td><span id="el0RestartPressure"></span> Bar</td>
                    </tr>
                    <tr>
                        <td class="label">Current Production Rate</td>
                        <td><span id="el0CurrentProduction"></span> %</td>
                        <td class="label">Default Production Rate</td>
                        <td><span id="el0DefaultProduction"></span> %</td>
                    </tr>
                    <tr>
                        <td class="label">Stack Voltage</td>
                        <td><span id="el0StackVoltage"></span> V</td>
                        <td class="label">Serial Number</td>
                        <td><span id="el0SerialNumber"></span></td>
                    </tr>
                    <tr>
                        <td class="label">IP Address</td>
                        <td><span id="el0IP"></span></td>
                        <td></td>
                        <td></td>
                    </tr>
                </table>
            </div>
        </div>
        <div id="el1">
            <div id="el1Off"  onclick="window.open('el_data.html?device=1')">
                <h3 style="text-align:center">Electrolyser 1 is switched OFF</h3>
            </div>
            <div id="el1On" style="display:none"  onclick="window.open('el_data.html?device=1')">
                <table class="Electrolyser">
                    <tr>
                        <th colspan="2"><h2>Electrolyser 1</h2></th>
                        <th id="elStop1" class="RelayOff" onclick="elStop(this, 1)">Stop</th>
                        <th id="elReboot1" class="RelayOff" onclick="elReboot(this, 1)">Reboot</th>
                    </tr>
                    <tr>
                        <td class="label">System State</td>
                        <td><span id="el1SysState"></span></td>
                        <td class="label">Electrolyser State</td>
                        <td><span id="el1ElState"></span></td>
                    </tr>
                    <tr>
                        <td class="label">Electrolyte Level</td>
                        <td><span id="el1Level"></span></td>
                        <td class="label">Electrolyte Temp</td>
                        <td><span id="el1Temp"></span> &deg;C</td>
                    </tr>
                    <tr>
                        <td class="label">Inner H2 Pressure</td>
                        <td><span id="el1InnerPressure"></span> Bar</td>
                        <td class="label">Outer H2 Pressure</td>
                        <td><span id="el1OuterPressure"></span> Bar</td>
                    </tr>
                    <tr>
                        <td class="label">H2 Flow</td>
                        <td><span id="el1H2Flow"></span> NL/hr</td>
                        <td class="label">Water Pressure</td>
                        <td><span id="el1WaterPressure"></span> Bar</td>
                    </tr>
                    <tr>
                        <td class="label">Max Tank Pressure</td>
                        <td><span id="el1MaxTankPressure"></span> Bar</td>
                        <td class="label">Restart Pressure</td>
                        <td><span id="el1RestartPressure"></span> Bar</td>
                    </tr>
                    <tr>
                        <td class="label">Current Production Rate</td>
                        <td><span id="el1CurrentProduction"></span> %</td>
                        <td class="label">Default Production Rate</td>
                        <td><span id="el1DefaultProduction"></span> %</td>
                    </tr>
                    <tr>
                        <td class="label">Stack Voltage</td>
                        <td><span id="el1StackVoltage"></span> V</td>
                        <td class="label">Serial Number</td>
                        <td><span id="el1SerialNumber"></span></td>
                    </tr>
                    <tr>
                        <td class="label">IP Address</td>
                        <td><span id="el1IP"></span></td>
                        <td></td>
                        <td></td>
                    </tr>
                </table>
            </div>
        </div>
        <div id="dryer">
            <div id="dryerOff" style="float:left; width:48%">
                <h2>Dryer OFF</h2>
            </div>
            <div id="dryerOn" style="float:left; display:none">
                <table class="Dryer">
                    <tr>
                        <th colspan=3><h2>Dryer</h2></th>
                        <th id="elReboot1" class="RelayOff" onclick="drReboot(this)" >Reboot</th>
                    </tr>
                    <tr>
                        <td class="label">Temperature 0</td>
                        <td><span id="dryerTemp0"></span> &deg;C</td>
                        <td class="label">Temperature 1</td>
                        <td><span id="dryerTemp1"></span> &deg;C</td>
                    </tr>
<!--                    <tr>
                        <td class="label">Temperature 2</td>
                        <td><span id="dryerTemp2"></span></td>
                        <td class="label">Temperature 3</td>
                        <td><span id="dryerTemp3"></span> </td>
                    </tr> -->
                    <tr>
                        <td class="label">Input Pressure</td>
                        <td><span id="dryerInputPressure"></span> Bar</td>
                        <td class="label">Output Pressure</td>
                        <td><span id="dryerOutputPressure"></span> Bar</td>
                    </tr>
                    <tr>
                        <td class="label">Dryer Error</td>
                        <td><span id="dryerError"></span></td>
                        <td class="label">Dryer Warning</td>
                        <td><span id="dryerWarning"></span></td>
                    </tr>
                </table>
            </div>
        </div>
        <div id="FuelcellMaintenance" style="float:left; width:48%; display:none">
            <h2>Fuel Cell Maintenance Mode Enabled</h2>
        </div>
        <div id="FuelCell0" style="float:left; width:48%" onclick="window.open('fc_data.html?device=0')">
            <div id="FuelCell0Off">
                <h3 style="text-align:center">Fuel Cell 0 is switched OFF</h3>
            </div>
            <div id="FuelCell0On" style="display:none">
                <table class="FuelCell">
                    <tr>
                        <th colspan="4"><h2>Fuel Cell 0</h2></th>
                    </tr>
                    <tr>
                        <td class="label">Serial Number</td>
                        <td><span id="fc0SerialNumber"></span></td>
                        <td class="label">Version</td>
                        <td><span id="fc0Version"></span></td>
                    </tr>
                    <tr>
                        <td class="label">Output Power</td>
                        <td><span id="fc0OutputPower"></span> W</td>
                        <td class="label">Output Volts</td>
                        <td><span id="fc0OutputVolts"></span> V</td>
                    </tr>
                    <tr>
                        <td class="label">Output Current</td>
                        <td><span id="fc0OutputCurrent"></span> A</td>
                        <td class="label">Anode Pressure</td>
                        <td><span id="fc0AnodePressure"></span> mBar</td>
                    </tr>
                    <tr>
                        <td class="label">Inlet Temperature</td>
                        <td><span id="fc0InletTemperature"></span> &deg;C</td>
                        <td class="label">Outlet Temperature</td>
                        <td><span id="fc0OutletTemperature"></span> &deg;C</td>
                    </tr>
                    <tr>
                        <td class="label" colspan=2>State</td>
                        <td colspan=2><span id="fc0State"></span></td>
                    </tr>
                    <tr>
                        <td class="label">Fault Flag A</td>
                        <td><span id="fc0FaultA"></span></td>
                        <td class="label">Fault Flag B</td>
                        <td><span id="fc0FaultB"></span></td>
                    </tr>
                    <tr>
                        <td class="label">Fault Flag C</td>
                        <td><span id="fc0FaultC"></span></td>
                        <td class="label">Fault Flag D</td>
                        <td><span id="fc0FaultD"></span></td>
                    </tr>
                    <tr>
                        <td colspan="4">
                            <a href="/fc/0/restart">Restart</a>
                        </td>
                    </tr>
                </table>
            </div>
            <br />
        </div>
        <div id="FuelCell1" style="float:left; width:48%; display:none" onclick="window.open('fc_data.html?device=1')">
            <div id="FuelCell1Off">
                <h3 style="text-align:center">Fuel Cell 1 is switched OFF</h3>
            </div>
            <div id="FuelCell1On" style="display:none">
                <table class="FuelCell">
                    <tr>
                        <th colspan="4"><h2>Fuel Cell 1</h2></th>
                    </tr>
                    <tr>
                        <td class="label">Serial Number</td>
                        <td><span id="fc1SerialNumber"></span></td>
                        <td class="label">Version</td>
                        <td><span id="fc1Version"></span></td>
                    </tr>
                    <tr>
                        <td class="label">Output Power</td>
                        <td><span id="fc1OutputPower"></span> W</td>
                        <td class="label">Output Volts</td>
                        <td><span id="fc1OutputVolts"></span> V</td>
                    </tr>
                    <tr>
                        <td class="label">Output Current</td>
                        <td><span id="fc1OutputCurrent"></span> A</td>
                        <td class="label">Anode Pressure</td>
                        <td><span id="fc1AnodePressure"></span> mBar</td>
                    </tr>
                    <tr>
                        <td class="label">Inlet Temperature</td>
                        <td><span id="fc1InletTemperature"></span> &deg;C</td>
                        <td class="label">Outlet Temperature</td>
                        <td><span id="fc1OutletTemperature"> &deg;C</span></td>
                    </tr>
                    <tr>
                        <td class="label" colspan=2>State</td>
                        <td colspan=2><span id="fc1State"></span></td>
                    </tr>
                    <tr>
                        <td class="label">Fault Flag A</td>
                        <td><span id="fc1FaultA"></span></td>
                        <td class="label">Fault Flag B</td>
                        <td><span id="fc1FaultB"></span></td>
                    </tr>
                    <tr>
                        <td class="label">Fault Flag C</td>
                        <td><span id="fc1FaultC"></span></td>
                        <td class="label">Fault Flag D</td>
                        <td><span id="fc1FaultD"></span></td>
                    </tr>
                    <tr>
                        <td colspan="4">
                            <a href="/fc/1/restart">Restart</a>
                        </td>
                    </tr>
                </table>
            </div>
            <br />
        </div>
        <div style="float:left; clear:both; width:32%" onclick="window.open('miscdata.html')">
            <table class="Gas">
                <tr>
                    <th colspan="4">
                        <h2>Gas</h2>
                    </th>
                </tr>
                <tr>
                    <td class="label">Fuel Cell Pressure</td>
                    <td><span id="gasFuelCellPressure"></span> mBar</td>
                    <td class="label">Tank Pressure</td>
                    <td><span id="gasTankPressure"></span> Bar</td>
                </tr>
            </table>
        </div>
        <div style="float:left; width:25%" onclick="window.open('miscdata.html')">
            <table class="Water">
                <tr>
                    <th colspan="2">
                        <h2>Water</h2>
                    </th>
                </tr>
                <tr>
                    <td class="label" style="width:70%">Conductivity</td>
                    <td><span id="TDS"></span> &micro;S/cm</td>
                </tr>
            </table>
        </div>
        <div style="float:left; width:39%" >
            <table class="AC" onclick="window.open('miscdata.html')">
                <tr>
                    <th colspan="4">
                        <h2>AC</h2>
                    </th>
                </tr>
                <tr>
                    <td class="label" style="width:30%">Power</td>
                    <td style="width:18%"><span id="ACPower"></span> W</td>
                    <td class="label" style="width:30%">Voltage</td>
                    <td style="width:18%"><span id="ACVolts"></span> V</td>
                </tr>
                <tr>
                    <td class="label">Current</td>
                    <td><span id="ACCurrent"></span> A</td>
                    <td class="label">Frequency</td>
                    <td><span id="ACFrequency"></span> Hz</td>
                </tr>
                <tr>
                    <td class="label">Power Factor</td>
                    <td><span id="ACPowerFactor"></span></td>
                    <td class="label">Energy</td>
                    <td><span id="ACEnergy"></span> Wh</td>
                </tr>
            </table>
            <table class="AC" onclick="window.open('heatpumpdata.html')">
                <tr>
                    <th colspan="4">
                        <h2>Heat Pump</h2>
                    </th>
                </tr>
                <tr>
                    <td class="label" style="width:30%">Power</td>
                    <td style="width:18%"><span id="HPPower"></span> W</td>
                    <td class="label" style="width:30%">Voltage</td>
                    <td style="width:18%"><span id="HPVolts"></span> V</td>
                </tr>
                <tr>
                    <td class="label">Current</td>
                    <td><span id="HPCurrent"></span> A</td>
                    <td class="label">Frequency</td>
                    <td><span id="HPFrequency"></span> Hz</td>
                </tr>
                <tr>
                    <td class="label">Power Factor</td>
                    <td><span id="HPPowerFactor"></span></td>
                    <td class="label">Energy</td>
                    <td><span id="HPEnergy"></span> Wh</td>
                </tr>
            </table>
        </div>
        <div style="clear:both">
            <a href="/">Back to the Menu</a>
        </div>
    </body>
</html>

